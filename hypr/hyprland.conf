# Set programs that you use
$terminal     = kitty
$fileManager  = nautilus -w
$menu         = anyrun
$browser      = thorium-browser-avx2 --ozone-platform-hint=auto

source = ./hw.conf      # Hardware configuration

# ------------------------------------------------------------------------------
exec-once = dunst       # Notifications
exec-once = hyprpaper   # Wallpaper
exec-once = waybar      # Bar
exec-once = ssh-agent   # SSH agent
exec-once = hypridle    # Idle manager

# Load plugins
exec-once = sleep 1 && hyprpm reload

# Cursor theme
exec-once = hyprctl setcursor Bibata-Modern-Classic 24

exec-once = $HOME/.config/hypr/scripts/playerctl-inhibit.sh

# Polkit agent
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Screenshare fix
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# syshud
exec-once = syshud

# jellyfin mpv shim
exec-once = jellyfin-mpv-shim
# ------------------------------------------------------------------------------

# Qt6 theme
env = QT_QPA_PLATFORMTHEME,gtk3

input {
    kb_layout = us
    kb_variant = altgr-intl
    kb_model =
    kb_options = caps:hyper
    kb_rules =

    follow_mouse = 1

    touchpad {
        natural_scroll = yes
        scroll_factor = 0.78
        clickfinger_behavior = true
    }

    sensitivity = 0.0
    accel_profile = adaptive
}

general {
    gaps_in = 4
    gaps_out = 8
    border_size = 4
    col.active_border = rgba(7fe2e9FF)
    col.inactive_border = rgba(53d1e7FF)
    layout = dwindle

    allow_tearing = true

    snap {
      enabled = true
      window_gap = 10
      monitor_gap = 10
      respect_gaps = true
    }
}

decoration {
    rounding = 8

    blur {
        enabled = true
        size = 6
        passes = 2
        noise = 0.05
        xray = false
        special = true
        brightness = 0.8
        popups = false
        ignore_opacity = true
    }

    shadow {
      enabled = false
    }
    dim_special = 0.3
    active_opacity = 1.0
    inactive_opacity = 0.9
}

animations {
    enabled = yes

    bezier = myBezier, 0.05, 0.9, 0.1, 1.00

    animation = windows, 1, 2, myBezier
    animation = windowsOut, 1, 2, default, popin 80%
    animation = border, 1, 2, default
    animation = fade, 1, 2, default
    animation = fadeSwitch, 1, 2, default
    animation = fadeLayers, 1, 2, default
    animation = workspaces, 1, 2, default, slidefade 50%
    animation = specialWorkspace, 1, 2, default, slidefadevert -20%
}

dwindle {
    pseudotile = yes
    preserve_split = yes
    smart_resizing = yes
}

group {
    auto_group = false
    drag_into_group = 2
    col.border_active = rgb(81A092)
    col.border_inactive = rgb(4B8384)
    col.border_locked_active = rgb(86B376)
    col.border_locked_inactive = rgb(699968)

    groupbar {
      font_size = 11
      height = 20
      col.active = rgb(4B8384)
      col.inactive = rgba(4B838480)
    }
}

gestures {
    workspace_swipe_distance = 300
}

gesture = 3, horizontal, workspace

misc {
    # Set default hyprland wallpaper (not the one set by hyprpaper)
    font_family = Maple Mono NF
    force_default_wallpaper = 0
}

binds {
    workspace_center_on = 1
}

plugin {
    overview {
        panelColor = rgb(282828)
        workspaceActiveBorder = rgb(EBDBB2)
        panelHeight = 160
        disableBlur = true
        reservedArea = 32
        hideBackgroundLayers = true
        hideTopLayers = true
        hideRealLayers = false
        affectStrut = true
        drawActiveWorkspace = false
        showSpecialWorkspace = true
        exitOnClick = false
    }
}

# Special workspace ============================================================
workspace = special:scratchpad, gapsin:20, gapsout:40
# ==============================================================================

# Window rules =================================================================

# Dialogs ----------------------------------------------------------------------
windowrule {
    name = dialogs
    match:modal = true
    float = true
    center = true
}
# ------------------------------------------------------------------------------

# Picture-in-Picture -----------------------------------------------------------
windowrule {
    name = picture-in-picture
    match:title = ^(Picture(-| )in(-| )[Pp]icture)$

    keep_aspect_ratio = true
    move = 73% 72%
    size = 25%
    float = true
    pin = true
}

# ------------------------------------------------------------------------------

# Idle inhibit for fullscreen firefox (for video playback)


# Games ------------------------------------------------------------------------
windowrule {
    name = game
    match:content = game
    monitor = 0
    # immediate = true
}

# Fullscreen border
windowrule {
    name = fullscreen-border
    match:fullscreen_state_client = 1
    border_color = rgb(C1447B)
}

windowrule {
    name = kitty
    match:class = ^(kitty)$
    opacity = 0.85 0.8
}

# Workspce presets -------------------------------------------------------------
exec-once = [workspace 5 silent] steam
windowrule {
    name = steam
    match:class = ^(steam)$
    workspace = 5
}
exec-once = [workspace 1 silent] zeditor
exec-once = [workspace 1 silent] kitty

exec-once = [workspace 2 silent] discord
windowrule {
    name = discord
    match:class = ^(discord)$
    workspace = 2
}

exec-once = [workspace 10 silent] kitty --hold sh -c "ncspot"
exec-once = [workspace 10 silent] kitty --hold sh -c "fastfetch"
exec-once = [workspace 10 silent] kitty --hold sh -c "unimatrix -l nnsss -c cyan -s 98"
workspace = 10,gapsin:50, gapsout:100
# ==============================================================================

# Layer rules ==================================================================
layerrule {
    name = anyrun
    match:namespace = ^(anyrun)$
    dim_around = on
}
# ==============================================================================

source = ./binds.conf
